{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\projects\\\\projects\\\\mern-blog\\\\client\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Typography, Box, CircularProgress, Alert } from \"@mui/material\";\nimport { postsAPI } from \"../services/api\";\nimport BlogPost from \"../components/BlogPost\";\nimport Pagination from \"../components/Pagination\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [pagination, setPagination] = useState({\n    current: 1,\n    pages: 1,\n    total: 0\n  });\n  const fetchPosts = async (page = 1) => {\n    try {\n      setLoading(true);\n      const response = await postsAPI.getPosts(page);\n      setPosts(response.data.posts);\n      setPagination(response.data.pagination);\n    } catch (error) {\n      setError(\"Failed to fetch posts\");\n      console.error(\"Error fetching posts:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  const handleLikeUpdate = (postId, likesCount, isLiked) => {\n    setPosts(prevPosts => prevPosts.map(post => post._id === postId ? {\n      ...post,\n      likes: isLiked ? [...post.likes, localStorage.getItem(\"userId\")] : post.likes.filter(like => like !== localStorage.getItem(\"userId\"))\n    } : post));\n  };\n  const handlePageChange = newPage => {\n    fetchPosts(newPage);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4,\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    sx: {\n      py: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h3\",\n      component: \"h1\",\n      gutterBottom: true,\n      align: \"center\",\n      children: \"Latest Blog Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 4\n      },\n      children: posts.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        align: \"center\",\n        color: \"text.secondary\",\n        children: \"No posts found. Be the first to create one!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(BlogPost, {\n        post: post,\n        onLikeUpdate: handleLikeUpdate\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      current: pagination.current,\n      total: pagination.pages,\n      onPageChange: handlePageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"CfpJfkGnjMXvOj4TLA2l3rbEUUQ=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Box","CircularProgress","Alert","postsAPI","BlogPost","Pagination","jsxDEV","_jsxDEV","Home","_s","posts","setPosts","loading","setLoading","error","setError","pagination","setPagination","current","pages","total","fetchPosts","page","response","getPosts","data","console","handleLikeUpdate","postId","likesCount","isLiked","prevPosts","map","post","_id","likes","localStorage","getItem","filter","like","handlePageChange","newPage","maxWidth","sx","py","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","component","gutterBottom","align","severity","mb","length","color","onLikeUpdate","onPageChange","_c","$RefreshReg$"],"sources":["C:/Users/asus/Desktop/projects/projects/mern-blog/client/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  CircularProgress,\r\n  Alert,\r\n} from \"@mui/material\";\r\nimport { postsAPI } from \"../services/api\";\r\nimport BlogPost from \"../components/BlogPost\";\r\nimport Pagination from \"../components/Pagination\";\r\n\r\nconst Home = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pages: 1,\r\n    total: 0,\r\n  });\r\n\r\n  const fetchPosts = async (page = 1) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await postsAPI.getPosts(page);\r\n      setPosts(response.data.posts);\r\n      setPagination(response.data.pagination);\r\n    } catch (error) {\r\n      setError(\"Failed to fetch posts\");\r\n      console.error(\"Error fetching posts:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const handleLikeUpdate = (postId, likesCount, isLiked) => {\r\n    setPosts((prevPosts) =>\r\n      prevPosts.map((post) =>\r\n        post._id === postId\r\n          ? {\r\n              ...post,\r\n              likes: isLiked\r\n                ? [...post.likes, localStorage.getItem(\"userId\")]\r\n                : post.likes.filter(\r\n                    (like) => like !== localStorage.getItem(\"userId\")\r\n                  ),\r\n            }\r\n          : post\r\n      )\r\n    );\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    fetchPosts(newPage);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ py: 4, textAlign: \"center\" }}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\r\n      <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\r\n        Latest Blog Posts\r\n      </Typography>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      <Box sx={{ mb: 4 }}>\r\n        {posts.length === 0 ? (\r\n          <Typography variant=\"h6\" align=\"center\" color=\"text.secondary\">\r\n            No posts found. Be the first to create one!\r\n          </Typography>\r\n        ) : (\r\n          posts.map((post) => (\r\n            <BlogPost\r\n              key={post._id}\r\n              post={post}\r\n              onLikeUpdate={handleLikeUpdate}\r\n            />\r\n          ))\r\n        )}\r\n      </Box>\r\n\r\n      <Pagination\r\n        current={pagination.current}\r\n        total={pagination.pages}\r\n        onPageChange={handlePageChange}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,SAAS,EACTC,UAAU,EACVC,GAAG,EACHC,gBAAgB,EAChBC,KAAK,QACA,eAAe;AACtB,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,UAAU,MAAM,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC;IAC3CsB,OAAO,EAAE,CAAC;IACVC,KAAK,EAAE,CAAC;IACRC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAMC,UAAU,GAAG,MAAAA,CAAOC,IAAI,GAAG,CAAC,KAAK;IACrC,IAAI;MACFT,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMU,QAAQ,GAAG,MAAMpB,QAAQ,CAACqB,QAAQ,CAACF,IAAI,CAAC;MAC9CX,QAAQ,CAACY,QAAQ,CAACE,IAAI,CAACf,KAAK,CAAC;MAC7BO,aAAa,CAACM,QAAQ,CAACE,IAAI,CAACT,UAAU,CAAC;IACzC,CAAC,CAAC,OAAOF,KAAK,EAAE;MACdC,QAAQ,CAAC,uBAAuB,CAAC;MACjCW,OAAO,CAACZ,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDhB,SAAS,CAAC,MAAM;IACdwB,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,gBAAgB,GAAGA,CAACC,MAAM,EAAEC,UAAU,EAAEC,OAAO,KAAK;IACxDnB,QAAQ,CAAEoB,SAAS,IACjBA,SAAS,CAACC,GAAG,CAAEC,IAAI,IACjBA,IAAI,CAACC,GAAG,KAAKN,MAAM,GACf;MACE,GAAGK,IAAI;MACPE,KAAK,EAAEL,OAAO,GACV,CAAC,GAAGG,IAAI,CAACE,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAC/CJ,IAAI,CAACE,KAAK,CAACG,MAAM,CACdC,IAAI,IAAKA,IAAI,KAAKH,YAAY,CAACC,OAAO,CAAC,QAAQ,CAClD;IACN,CAAC,GACDJ,IACN,CACF,CAAC;EACH,CAAC;EAED,MAAMO,gBAAgB,GAAIC,OAAO,IAAK;IACpCpB,UAAU,CAACoB,OAAO,CAAC;EACrB,CAAC;EAED,IAAI7B,OAAO,EAAE;IACX,oBACEL,OAAA,CAACT,SAAS;MAAC4C,QAAQ,EAAC,IAAI;MAACC,EAAE,EAAE;QAAEC,EAAE,EAAE,CAAC;QAAEC,SAAS,EAAE;MAAS,CAAE;MAAAC,QAAA,eAC1DvC,OAAA,CAACN,gBAAgB;QAAA8C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CAAC;EAEhB;EAEA,oBACE3C,OAAA,CAACT,SAAS;IAAC4C,QAAQ,EAAC,IAAI;IAACC,EAAE,EAAE;MAAEC,EAAE,EAAE;IAAE,CAAE;IAAAE,QAAA,gBACrCvC,OAAA,CAACR,UAAU;MAACoD,OAAO,EAAC,IAAI;MAACC,SAAS,EAAC,IAAI;MAACC,YAAY;MAACC,KAAK,EAAC,QAAQ;MAAAR,QAAA,EAAC;IAEpE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAY,CAAC,EAEZpC,KAAK,iBACJP,OAAA,CAACL,KAAK;MAACqD,QAAQ,EAAC,OAAO;MAACZ,EAAE,EAAE;QAAEa,EAAE,EAAE;MAAE,CAAE;MAAAV,QAAA,EACnChC;IAAK;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACR,eAED3C,OAAA,CAACP,GAAG;MAAC2C,EAAE,EAAE;QAAEa,EAAE,EAAE;MAAE,CAAE;MAAAV,QAAA,EAChBpC,KAAK,CAAC+C,MAAM,KAAK,CAAC,gBACjBlD,OAAA,CAACR,UAAU;QAACoD,OAAO,EAAC,IAAI;QAACG,KAAK,EAAC,QAAQ;QAACI,KAAK,EAAC,gBAAgB;QAAAZ,QAAA,EAAC;MAE/D;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,GAEbxC,KAAK,CAACsB,GAAG,CAAEC,IAAI,iBACb1B,OAAA,CAACH,QAAQ;QAEP6B,IAAI,EAAEA,IAAK;QACX0B,YAAY,EAAEhC;MAAiB,GAF1BM,IAAI,CAACC,GAAG;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGd,CACF;IACF;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAEN3C,OAAA,CAACF,UAAU;MACTa,OAAO,EAAEF,UAAU,CAACE,OAAQ;MAC5BE,KAAK,EAAEJ,UAAU,CAACG,KAAM;MACxByC,YAAY,EAAEpB;IAAiB;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACO,CAAC;AAEhB,CAAC;AAACzC,EAAA,CA5FID,IAAI;AAAAqD,EAAA,GAAJrD,IAAI;AA8FV,eAAeA,IAAI;AAAC,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}